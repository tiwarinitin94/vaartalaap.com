function create_info(e, t, i, a, r, o, l) { $.post(url_vrt + "gallery_area/get_online", { data: e }, function (o) {/* console.log("<img src='"+url_vrt+"public/images/"+o+".png'/>");*/$('#pro_intro_pro').append("<img style='height:15px;width:15px;'src='" + url_vrt + "public/images/" + o + ".png'/>" + o); }); if (e) { img.src = i, img_wdth = img.width, img_height = img.height, img_wdth > 100 ? (img__wdth = 100, img_height = img_height / img_wdth * img__wdth, img_height < 100 && (img_height = 100), img_height > 100 ? (radius_border = 25, top_margin = -img_height / 2 + 5) : (radius_border = 50, top_margin = 0)) : (img__wdth = img_wdth, img_height > 100 ? (radius_border = 25, top_margin = -img_height / 2 + 5) : (radius_border = 50, top_margin = 0)), $(".gal_name_pro").prepend(a + " " + r + "<br><br><label id='un' ><a href='" + url_vrt + e + "'>" + e + "</a></label><br><br>" + o + "<br><br>" + l), e == user_logged && (0, $(".gal_name_pro").prepend('<button id="edit" onclick="update_info()" style="float:left;">Edit Info</button><br><br>')), $("#profile_img_pro").attr("src", i) } console.log(user.user_profile); /*alert(user.user_profile)*/ } function update_info() { updat_info_user = '<center><label id="error"  style="padding:5px;">Update Info</label><form id="profile_file" action="" method="POST" \tenctype="multipart/form-data" style="margin:0px auto;"><img src="' + user.profile_image + '" id="show_img" width="150" height="150"style="border-radius:50%;" /><br><br><input type="file" name="profilepic" id="uploading_image"accept="image/*" style=" width:250px;background-color:#fff;"/><br><br><input type="submit" id="edit_submit" value="Change Image" ></input>  </form><button onclick="remove_image()" id="edit" style="float:none;outline:none;">Remove Image</button></center><br><hr><br><input type="text" id="update_i_f_n"style="margin-left:40px;" value="' + user.firstName + '" placeholder="First Name"></input> <input type="text" id="update_i_l_n" value="' + user.lastName + '"  placeholder="Last Name"></input><br><br><center><button onclick="info_up(\'f_n\')"style="border:.1px solid #999;padding:6px; margin-left:5px;background:#efefef;cursor:pointer;outline:none;">Update Name</button></center><hr> <input type="text" style="margin-left:40px;" id="update_i_tag" value="' + user.bio + '" placeholder="Tag Line"></input><br><br><button style="border:.1px solid #999;padding:6px; margin-left:80px;background:#efefef;cursor:pointer;outline:none;" onclick="info_up(\'tag\')">Write Tag line</button><hr> <br><input type="text" style="margin-left:40px;" id="update_i_ct" value="' + user.country + '" placeholder="In the world you Live"></input><button style="border:.1px solid #999;padding:6px; margin-left:5px;background:#efefef;cursor:pointer;outline:none;" onclick="info_up(\'ct\')">Update Country</button>', modal(updat_info_user), $("#profile_file").submit(function (e) { $('#edit_submit').prop('disabled', true); return e.preventDefault(), $.ajax({ url: url_vrt + "profile/update__profile_image/ajdfhadjfhadhflakjflkajflkadjfadlkfjadadfaldfdalfjadkfjadklfjadlkfjakldjkljdkas", type: "POST", data: new FormData(this), contentType: !1, cache: !1, processData: !1, error: function () { }, success: function (e) { alert("here I am"); e = url_vrt + "public/userdata/profile_pics/" + e, $("#profile_img_pro").attr("src", e), $("#show_img").attr("src", e) } }), !1 }); } function info_up(e) { sirname = "f_n" == e ? $("#update_i_l_n").val() : "", this_value = $("#update_i_" + e).val(), $.ajax({ type: "POST", url: "profile/update_data_of_info/" + e, data: { data: this_value, data_sir: sirname }, cache: !1, success: function (e) { } }) } function remove_image() { $.ajax({ url: url_vrt + "profile/remove__profile_image/ajdfhadjfhadhflakjflkajflkadjfadlkfjadadfaldfdalfjadkfjadklfjadlkfjakldjkljdkas", type: "POST", error: function () { }, success: function () { remove_pic = url_vrt + "public/images/default-pic.png", $("#profile_img_pro").attr("src", remove_pic), $("#show_img").attr("src", remove_pic) } }) } function check_file_pro(e, t) { $.ajax({ url: "profile/get_file_existance", type: "POST", data: { file: e, max_width: "60" }, error: function () { }, success: function (i) { var a = (i = (i = i.replace('"', "")).trim()).split(","); a[1] > 70 && (a[1] = 70), t ? "cover" == a[0] ? (src_image = url_vrt + "public/userdata/cover_pics/" + e, document.getElementById("this_will_show_image_data").html = "", $("#this_will_show_image_data").unbind().append("<img height='" + a[1] + "' width='" + a[2] + "'style='padding:5px;' src='" + src_image + "'/>")) : "profile" == a[0] ? (src_image = url_vrt + "public/userdata/profile_pics/" + e, $("#this_will_show_image_data").unbind().append("<img height='" + a[1] + "' width='" + a[2] + "'style='padding:5px;'src='" + src_image + "'/>")) : "data" == a[0] && (src_image = url_vrt + "public/userdata/data_pics/" + e, $("#this_will_show_image_data").unbind().append("<img height='" + a[1] + "' width='" + a[2] + "'style='padding:5px;'src='" + src_image + "'/>")) : "cover" == a[0] ? (src_image = url_vrt + "public/userdata/cover_pics/" + e, document.getElementById("image_data").html = "", $("#image_data").unbind().append("<img height='" + a[1] + "' width='" + a[2] + "'style='padding:5px;' src='" + src_image + "'/>")) : "profile" == a[0] ? (src_image = url_vrt + "public/userdata/profile_pics/" + e, $("#image_data").unbind().append("<img height='" + a[1] + "' width='" + a[2] + "'style='padding:5px;'src='" + src_image + "'/>")) : "data" == a[0] && (src_image = url_vrt + "public/userdata/data_pics/" + e, $("#image_data").unbind().append("<img height='" + a[1] + "' width='" + a[2] + "'style='padding:5px;'src='" + src_image + "'/>")) } }, "json") } function profile_pic_check(e, t, i) { $.ajax({ url: url_vrt + "profile/get_user_friends_data", type: "POST", data: { added_by: e }, error: function () { }, success: function (a) { t ? "" == a.trim() ? $("#this_will_show_image").append("<a href='" + url_vrt + e + "' style='cursor:pointer;'><img height='60' width='60'style='padding:5px;border-radius:50%;'title='" + e + "' src='" + url_vrt + "public/images/default-pic.png'/></a>") : $("#this_will_show_image").append("<a href='" + url_vrt + e + "' style='cursor:pointer;'><img height='60' width='60'style='padding:5px;border-radius:50%;' title='" + e + "' src='" + url_vrt + "public/userdata/profile_pics/" + a + "'/></a>") : 1 == i ? "" == a.trim() ? $("#followers").append("<a href='" + url_vrt + e + "' style='cursor:pointer;'><img height='60' width='60'style='padding:5px;border-radius:50%;'title='" + e + "' src='" + url_vrt + "public/images/default-pic.png'/></a>") : $("#followers").append("<a href='" + url_vrt + e + "' style='cursor:pointer;'><img height='60' width='60'style='padding:5px;border-radius:50%;' title='" + e + "' src='" + url_vrt + "public/userdata/profile_pics/" + a + "'/></a>") : "" == a.trim() ? $("#frenz").append("<a href='" + url_vrt + e + "' style='cursor:pointer;'><img height='60' width='60'style='padding:5px;border-radius:50%;'title='" + e + "' src='" + url_vrt + "public/images/default-pic.png'/></a>") : $("#frenz").append("<a href='" + url_vrt + e + "' style='cursor:pointer;'><img height='60' width='60'style='padding:5px;border-radius:50%;' title='" + e + "' src='" + url_vrt + "public/userdata/profile_pics/" + a + "'/></a>") } }) } function get_info(e) { $.post(url_vrt + "profile/get_user_info/", { 'the_user_id': e }, function (e) { if (user_logged == user_pro) { var t = " <button id='edit' onclick='run(\"q\")' >Edit</button>", i = "<button id='edit' onclick='run(\"h\")' >Edit</button>", a = "<button id='edit' onclick='run(\"w\")' >Edit</button>", r = " <button id='edit' onclick='run(\"said\")' style='font-size:10px;float:right;'>Edit</button>"; fav_quote = "Enter what you follow.", hobby = "Write what you Like to do.", said_by = "said by whom?", about_you = "Describe yourself", sign = url_vrt + "public/images/vaarta2.png" } else { fav_quote = user_pro + " Follow Nothing.", hobby = user_pro + " likes nothing.", said_by = user_pro + ".......", about_you = "About " + user_pro, sign = url_vrt + "public/images/vaarta2.png"; var t = "", i = "", a = "", r = "" } if (e) { new_height = "auto", new_width = "auto"; for (var o = 0; o < e.length; o++) { "" == e[o].signature ? sign = url_vrt + "public/images/vaarta2.png" : sign = url_vrt + "public/userdata/data_pics/" + e[o].signature; var l = document.createElement("img"); l.src = sign, img_wdth = l.width, "" != e[o].fav_quote && (fav_quote = e[o].fav_quote), "" != e[o].hobby && (hobby = e[o].hobby), "" != e[o].said_by && (said_by = e[o].said_by), e[o].about_you && (about_you = e[o].about_you), $("#info_pro").append("<div class='gal_name'style='float:none;font-size:13px;text-shadow:none;'><label id='heading'>Fav Quote</label>" + t + "<br><br><form class='edit_hide' id='editbox_q' style='display:none;'><textarea id='input_val_q' style='width:100%;height:50px;' onchange='update(\"q\")'  autofocus></textarea></form><div id='material_q' class='textBox_show'>" + fav_quote + "</div> <br/>" + r + "<form class='edit_hide' id='editbox_said' style='display:none;'><textarea id='input_val_said' cols='5' rows='2' style='width:100%;float:right;' onchange='update(\"said\")' autofocus></textarea></form><div id='material_said' class='textBox_show' style='float:right; font-style:italic;color:#777;'>" + said_by + "</div></div><br>"), $("#info_pro_hobby").append(" <div class='gal_name'style='float:none;font-size:13px;text-shadow:none;'><label id='heading'>Hobby</label>" + i + "<br><br><form class='edit_hide' id='editbox_h' style='display:none;'><textarea id='input_val_h'style='width:100%;height:50px;' onchange='update(\"h\")' autofocus></textarea></form><div id='material_h' class='textBox_show'>" + hobby + "</div></div><br>"), $("#info_pro_style").append(" <div class='gal_name'style='float:none;font-size:13px;text-shadow:none;'><label id='heading'>Who am I?</label>" + a + "<br><br><form class='edit_hide' id='editbox_w' style='display:none;'><textarea id='input_val_w'style='width:100%;height:50px;' onchange='update(\"w\")' autofocus></textarea></form><div id='material_w' class='textBox_show'>" + about_you + "</div></div><br>"), $("#sign_image").attr("src", sign) } } else $("#info_pro").append("<div class='gal_name'style='float:none;font-size:13px;text-shadow:none;'><label id='heading'>Fav Quote</label>" + t + "<br><br><form id='editbox_q' class='edit_hide'style='display:none;'><textarea id='input_val_q'style='width:100%;height:50px;' onchange='update(\"q\")'  autofocus></textarea></form><div class='textBox_show' id='material_q' >" + fav_quote + "</div><br>" + r + "<form id='editbox_said' class='edit_hide' style='display:none;'><textarea id='input_val_said' cols='5' rows='2' style='width:100%;height:10px;float:right;' onchange='update(\"said\")' autofocus></textarea></form><div id='material_said'style='float:right; font-style:italic;color:#777;' class='textBox_show'>" + said_by + "</div></div><br>"), $("#info_pro_hobby").append(" <div class='gal_name'style='float:none;font-size:13px;text-shadow:none;'><label id='heading'>Hobby</label>" + i + "<br><br><form id='editbox_h' class='edit_hide'style='display:none;'><textarea id='input_val_h'style='width:100%;height:50px;' onchange='update(\"h\")' autofocus></textarea></form><div id='material_h' class='textBox_show'>" + hobby + "</div></div><br>"), $("#info_pro_style").append(" <div class='gal_name'style='float:none;font-size:13px;text-shadow:none;'><label id='heading'>Who am I?</label>" + a + "<br><br><form id='editbox_w'class='edit_hide' style='display:none;'><textarea id='input_val_w'style='width:100%;height:50px;' onchange='update(\"w\")' autofocus></textarea></form><div id='material_w'  class='textBox_show'>" + about_you + "</div></div><br>"); $(document).mousedown(function (e) { 0 === $(".edit_hide").has(e.target).length && ($(".edit_hide").hide(), $(".textBox_show").show()) }) }, "json") } function update(e) { update_val = $("#input_val_" + e).val(), $.ajax({ type: "POST", url: "profile/update_data/" + e, data: { data: update_val }, cache: !1, success: function (t) { $("#material_" + e).html(update_val) } }) } function run(e) { $("#editbox_" + e).show(), $("#material_" + e).hide(); var t = $("#material_" + e).html(); $("#input_val_" + e).html(t), $("#input_val_" + e).focus(), $("#input_val_" + e).expandable(), $("#input_val_" + e).keyup(function (e) { if (13 == e.keyCode) { var t = getCaret(this), i = $(this).val(), a = i.length; $(this).val(i.substr(0, t) + "<br>" + i.substr(t, a)) } }) } var img = document.createElement("img"), user_pro; $(document).unbind().ready(function () { user_pro = user.user_profile, get_info(user.id), create_info(user.user_profile, user.id, user.profile_image, user.firstName, user.lastName, user.bio, user.country), $.post(url_vrt + "profile/friends_of_pro/", { 'profile_data': user.user_profile }, function (e) { if (user_logged == user_pro && $("#add_user").remove(), e.includes(user_logged) ? $("#add_user").html("Unpick") : $.post(url_vrt + "profile/check_relation", { data: user_pro }, function (e) { e == user_logged ? ($("#add_user").html("Request Sent"), $("#vaarta_rel").append('<button onclick="cancel()" id="cr_cancel">Cancel Request</button>')) : e == user_pro && ($("#add_user").html("Accept Request"), $("#vaarta_rel").append('<button onclick="cancel()" id="cr_cancel">Cancel Request</button>')) }), "" != e) for (var t = 0; t < e.length && 15 != t; t++)"" != e[t] && profile_pic_check(e[t], "", ""); else $("#frenz").append('<div id="error"><label style="color:#999;">Seems like you don\'t have friends. </label></div>') }, "json"), $.post(url_vrt + "profile/followers_of_pro/", { 'profile_data': user.user_profile }, function (e) { for (var t = 0; t < e.length && 15 != t; t++)profile_pic_check(e[t].followed_by, "", 1) }, "json"), $.post(url_vrt + "profile/image_data/", { 'profile_data': user.user_profile }, function (e) { if ("" != e) for (var t = 0; t < e.length; t++)check_file_pro(e[t].post_image, ""); else $("#image_data").unbind().append('<div id="error"><label style="color:#999;">Seems like you don\'t have photos. </label></div>') }, "json") });

